version: "3.9"

# Configurazione per produzione su Oracle Cloud
# Usa immagini da OCIR invece di build locali

services:
  db:
    restart: always

  backend:
    # Immagine da Oracle Container Registry (OCIR)
    # Nota: Oracle usa eu-milan-1 come region key per eu-turin-1
    image: eu-milan-1.ocir.io/${OCIR_NAMESPACE}/myplanner/backend:latest
    environment:
      ENVIRONMENT: production
      UVICORN_WORKERS: ${UVICORN_WORKERS:-4}
      CORS_ALLOWED_ORIGINS: ${CORS_ALLOWED_ORIGINS}
    # Rimuove il bind mount del codice (usa solo il codice nell'immagine)
    volumes: []
    restart: always

  frontend:
    # Immagine da Oracle Container Registry (OCIR)
    image: eu-milan-1.ocir.io/${OCIR_NAMESPACE}/myplanner/frontend:latest
    restart: always

